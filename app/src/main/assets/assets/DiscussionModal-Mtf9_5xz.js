import{r as d,j as e,C as f,a as p}from"./index-Qv1PFdT_.js";import{r as k,m as y,M as j}from"./MessageBubble-D2SqgnqM.js";import{M as v,r as w,a as N}from"./index-Bx4nMA7B.js";import"./useCopyToClipboard-EhHpMIYG.js";const R=({discussion:h,onClose:l,onSendMessage:m,onDeleteMessage:x})=>{var b;const{contextTurn:u,turns:s}=h,[a,n]=d.useState(""),i=d.useRef(null),o=((b=s[s.length-1])==null?void 0:b.isStreaming)===!0,c=()=>{a.trim()&&!o&&(m(a),n(""))},g=r=>{r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),c())};d.useEffect(()=>{var r;(r=i.current)==null||r.scrollIntoView({behavior:"smooth"})},[s]);const t=()=>{};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface rounded-lg shadow-custom-lg-light dark:shadow-custom-lg-dark w-full max-w-2xl h-[90vh] flex flex-col border border-light-border dark:border-dark-border animate-scale-in",children:[e.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-light-border dark:border-dark-border flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold font-display",children:"Side Discussion"}),e.jsx("button",{onClick:l,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:e.jsx(f,{className:"h-6 w-6"})})]}),e.jsxs("main",{className:"flex-grow flex flex-col overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-dashed border-light-border dark:border-dark-border flex-shrink-0",children:[e.jsx("p",{className:"text-sm font-semibold text-light-text-secondary dark:text-dark-text-secondary mb-2",children:"Original Context:"}),e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none prose-p:my-1 text-light-text-secondary dark:text-dark-text-secondary",children:e.jsx(v,{components:y,remarkPlugins:[N,k],rehypePlugins:[[w,{output:"mathml",throwOnError:!1}]],children:u.content})})]}),e.jsxs("div",{className:"p-4 space-y-4 flex-grow",children:[s.map(r=>e.jsx("div",{className:`flex ${r.role==="user"?"justify-end":"justify-start"}`,children:e.jsx(j,{turn:r,onRephrase:t,onRegenerate:t,onResend:t,onStartDiscussion:t,onDelete:x})},r.id)),e.jsx("div",{ref:i})]})]}),e.jsxs("footer",{className:"p-4 border-t border-light-border dark:border-dark-border flex-shrink-0",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx("textarea",{value:a,onChange:r=>n(r.target.value),onKeyDown:g,placeholder:o?"AI is responding...":"Ask a follow-up question...",disabled:o,className:"w-full pl-4 pr-12 py-3 border rounded-lg resize-none max-h-32 bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border focus:ring-2 focus:ring-light-primary dark:focus:ring-dark-primary focus:outline-none transition disabled:opacity-60",rows:1}),e.jsx("button",{onClick:c,disabled:!a.trim()||o,className:"absolute right-3 top-1/2 -translate-y-1/2 p-2 rounded-full bg-light-primary text-white hover:bg-opacity-90 disabled:bg-opacity-50 disabled:cursor-not-allowed transition-all","aria-label":"Send message",children:e.jsx(p,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex justify-end gap-3",children:e.jsx("button",{onClick:l,className:"px-4 py-2 bg-light-surface dark:bg-dark-surface border border-light-border dark:border-dark-border rounded-lg hover:bg-light-border dark:hover:bg-dark-border transition-colors",children:"Close & Save Discussion"})})]})]})})};export{R as default};
