import{r as l,j as e,V as h,C as x,L as u}from"./index-Qv1PFdT_.js";const c=["Generate a conceptual map about the main topics.","Create a visual analogy for the most complex concept discussed.","Draw a simple diagram explaining the key process.","Illustrate the main components and their interactions.","Create a timeline of the key events mentioned.","Draw a before-and-after comparison.","Visualize the core idea as a single, memorable icon."],f=({contextTurn:o,onClose:g,onGenerate:m})=>{const[t,d]=l.useState(c[0]),[a,i]=l.useState(!1),[s,n]=l.useState(null),b=async()=>{if(t.trim()){i(!0),n(null);try{await m(t)}catch(r){n(r instanceof Error?r.message:"An unknown error occurred during image generation.")}finally{i(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface rounded-lg shadow-custom-lg-light dark:shadow-custom-lg-dark w-full max-w-2xl h-[90vh] flex flex-col border border-light-border dark:border-dark-border animate-scale-in",children:[e.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-light-border dark:border-dark-border flex-shrink-0",children:[e.jsxs("h2",{className:"text-xl font-bold font-display flex items-center gap-2",children:[e.jsx(h,{className:"w-6 h-6"}),"Generate Image"]}),e.jsx("button",{onClick:g,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10",children:e.jsx(x,{className:"h-6 w-6"})})]}),e.jsxs("main",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-light-text-secondary dark:text-dark-text-secondary mb-2 block",children:"Generation Prompt"}),e.jsx("textarea",{value:t,onChange:r=>d(r.target.value),placeholder:"Describe the image you want to generate...",className:"w-full p-2 border rounded bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border focus:ring-1 focus:ring-light-primary dark:focus:ring-dark-primary focus:outline-none",rows:3}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:c.map(r=>e.jsx("button",{onClick:()=>d(r),className:"px-2 py-1 text-xs bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border rounded-full hover:bg-light-border dark:hover:bg-dark-border",children:r},r))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:b,disabled:a||!t.trim(),className:"px-6 py-2 bg-light-primary text-white font-semibold rounded-md hover:bg-opacity-90 transition-colors disabled:bg-opacity-50 disabled:cursor-wait",children:a?"Generating...":"Generate New Image"})}),e.jsxs("div",{className:"mt-4 p-2 border-t border-light-border dark:border-dark-border flex-grow flex items-center justify-center bg-light-bg dark:bg-dark-bg rounded-lg min-h-[300px]",children:[a&&e.jsx(u,{size:"lg",text:"The model is creating your image..."}),s&&e.jsxs("p",{className:"text-red-500 text-center",children:["Error: ",s]}),!a&&!s&&o.generatedImages&&o.generatedImages.length>0?e.jsx("div",{className:"w-full h-full overflow-x-auto overflow-y-hidden flex items-center space-x-4 p-4",children:o.generatedImages.map(r=>e.jsxs("div",{className:"flex-shrink-0 w-80 h-full relative group animate-fade-in-up",children:[e.jsx("img",{src:`data:image/png;base64,${r.base64}`,alt:r.prompt,className:"w-full h-full object-contain rounded-md"}),e.jsx("p",{className:"absolute bottom-0 left-0 right-0 bg-black/60 text-white text-xs p-2 opacity-0 group-hover:opacity-100 transition-opacity truncate",children:r.prompt})]},r.id))}):!a&&!s&&e.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary",children:"Generated images will appear here"})]})]})]})})};export{f as default};
