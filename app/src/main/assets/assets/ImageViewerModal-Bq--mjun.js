import{r as o,j as t,C as Z,O as $,X as H,Z as U,Y as F,_ as K}from"./index-Qv1PFdT_.js";const _=({images:l,startIndex:S=0,onClose:m})=>{const[w,O]=o.useState(S),[a,x]=o.useState(1),[i,r]=o.useState({x:0,y:0}),[y,j]=o.useState(!1),[f,M]=o.useState({x:0,y:0}),g=o.useRef(null),b=o.useRef(null),u=o.useCallback(()=>{x(1),r({x:0,y:0})},[]),h=o.useCallback(e=>{u(),O(n=>{const s=n+e;return s<0?l.length-1:s>=l.length?0:s})},[l.length,u]);o.useEffect(()=>{const e=n=>{n.key==="Escape"&&m(),n.key==="ArrowRight"&&h(1),n.key==="ArrowLeft"&&h(-1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[m,h]),o.useEffect(()=>{u()},[w,u]);const p=o.useCallback((e,n)=>{if(!g.current||!b.current)return e;const s=g.current.clientWidth,c=g.current.clientHeight,d=b.current.clientWidth,X=b.current.clientHeight,I=Math.max(0,(s*n-d)/2),D=Math.max(0,(c*n-X)/2),z=Math.max(-I,Math.min(I,e.x)),T=Math.max(-D,Math.min(D,e.y));return{x:z,y:T}},[]),N=e=>{const s=e==="in"?a*1.5:a/1.5,c=Math.max(.5,Math.min(s,5));x(c),c<=1?r({x:0,y:0}):r(d=>p(d,c))},E=e=>{e.preventDefault();const n=.2,s=e.deltaY>0?a/(1+n):a*(1+n),c=Math.max(.5,Math.min(s,5));x(c),c<=1?r({x:0,y:0}):r(d=>p(d,c))},R=e=>{a>1&&(e.preventDefault(),j(!0),M({x:e.clientX-i.x,y:e.clientY-i.y}))},P=e=>{if(y){e.preventDefault();const n={x:e.clientX-f.x,y:e.clientY-f.y};r(p(n,a))}},C=e=>({x:e.touches[0].clientX,y:e.touches[0].clientY}),Y=e=>{if(a>1&&e.touches.length===1){j(!0);const{x:n,y:s}=C(e);M({x:n-i.x,y:s-i.y})}},A=e=>{if(y&&e.touches.length===1){e.preventDefault();const{x:n,y:s}=C(e),c={x:n-f.x,y:s-f.y};r(p(c,a))}},k=()=>{j(!1)},L=()=>{a>1?u():x(2)},v=l[w],W=`image-viewer-img max-w-full max-h-full object-contain touch-none transition-transform duration-200 ${y?"is-dragging":""} ${a<=1?"zoomed-out":"zoomed-in"}`;return t.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex flex-col items-center justify-center p-4 animate-scale-in",style:{animationDuration:"200ms"},onClick:m,children:[t.jsxs("div",{className:"absolute top-0 left-0 right-0 flex justify-between items-center p-4 text-white z-10 bg-gradient-to-b from-black/50 to-transparent",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold",children:v.alt}),l.length>1&&t.jsxs("p",{className:"text-sm opacity-80",children:[w+1," / ",l.length]})]}),t.jsx("button",{onClick:m,className:"p-2 bg-black/50 rounded-full hover:bg-black/80 transition-colors",children:t.jsx(Z,{className:"h-6 w-6"})})]}),t.jsx("div",{ref:b,className:"w-full h-full flex items-center justify-center",onWheel:E,onClick:e=>e.stopPropagation(),onMouseMove:P,onMouseUp:k,onMouseLeave:k,onTouchMove:A,onTouchEnd:k,children:t.jsx("img",{ref:g,src:v.src,alt:v.alt,className:W,style:{transform:`translate(${i.x}px, ${i.y}px) scale(${a})`},onMouseDown:R,onDoubleClick:L,onTouchStart:Y})}),l.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),h(-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 rounded-full hover:bg-black/80 text-white transition-colors","aria-label":"Previous image",children:t.jsx($,{className:"h-8 w-8"})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),h(1)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 rounded-full hover:bg-black/80 text-white transition-colors","aria-label":"Next image",children:t.jsx(H,{className:"h-8 w-8"})})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex justify-center p-4 z-10 bg-gradient-to-t from-black/50 to-transparent",children:t.jsxs("div",{className:"flex items-center gap-2 p-1.5 bg-black/60 rounded-lg text-white backdrop-blur-sm",children:[t.jsx("button",{onClick:e=>{e.stopPropagation(),N("out")},className:"p-2 hover:bg-white/20 rounded-md transition-colors",children:t.jsx(U,{className:"h-6 w-6"})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),u()},className:"p-2 hover:bg-white/20 rounded-md transition-colors",children:t.jsx(F,{className:"h-6 w-6"})}),t.jsx("button",{onClick:e=>{e.stopPropagation(),N("in")},className:"p-2 hover:bg-white/20 rounded-md transition-colors",children:t.jsx(K,{className:"h-6 w-6"})})]})})]})};export{_ as default};
