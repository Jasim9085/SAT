import{r as h,j as r,N,w as v}from"./index-Qv1PFdT_.js";import{M as S,r as C,a as R}from"./index-Bx4nMA7B.js";const b=({content:n})=>r.jsx(S,{remarkPlugins:[R],rehypePlugins:[[C,{output:"mathml",throwOnError:!1}]],components:{p:v.Fragment},children:n}),M=({summary:n,quiz:d,onReset:g})=>{const[o,u]=h.useState({}),[t,p]=h.useState(!1),x=(a,e)=>{u(s=>({...s,[a]:e}))},k=()=>{p(!0)},f=()=>d.reduce((a,e,s)=>a+(o[s]===e.correctAnswer?1:0),0),y=()=>{window.confirm("Start a new session? Your current conversation and quiz results will be cleared.")&&g()},m=f(),w=m/d.length*100;return r.jsxs("div",{className:"mt-4 p-4 md:p-6 bg-light-bg dark:bg-dark-bg rounded-lg border border-light-border dark:border-dark-border animate-fade-in-up",children:[r.jsx("h2",{className:"text-2xl font-bold font-display mb-2 text-light-primary dark:text-dark-primary",children:"Session Report"}),r.jsxs("div",{className:"bg-light-surface dark:bg-dark-surface p-4 rounded-md mb-6",children:[r.jsx("h3",{className:"font-bold mb-2",children:"Summary"}),r.jsx("p",{className:"text-light-text-secondary dark:text-dark-text-secondary prose prose-sm max-w-none",children:n})]}),r.jsx("h3",{className:"text-xl font-bold font-display mb-4",children:"Final Quiz"}),r.jsx("div",{className:"space-y-6",children:d.map((a,e)=>r.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${t?o[e]===a.correctAnswer?"border-green-500 bg-green-500/10":"border-red-500 bg-red-500/10":"border-light-border dark:border-dark-border bg-light-surface dark:bg-dark-surface"}`,children:[r.jsxs("div",{className:"font-semibold mb-3 flex flex-row",children:[r.jsxs("span",{className:"mr-2",children:[e+1,"."]}),r.jsx(b,{content:a.question})]}),r.jsx("div",{className:"space-y-2",children:a.options.map((s,j)=>{const l=o[e]===s,i=a.correctAnswer===s;let c="ring-light-primary dark:ring-dark-primary";return t&&(i?c="ring-green-500":l&&!i&&(c="ring-red-500")),r.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded-md transition-colors ${l?"bg-light-primary/10 dark:bg-dark-primary/10":""} ${t?"cursor-default":"hover:bg-light-border dark:hover:bg-dark-border"}`,children:[r.jsx("input",{type:"radio",name:`question-${e}`,value:s,checked:l,onChange:()=>x(e,s),disabled:t,className:`form-radio h-4 w-4 text-light-primary dark:text-dark-primary focus:ring-2 ${c} bg-transparent border-light-text-secondary dark:border-dark-text-secondary`}),r.jsx("span",{className:`${t&&i?"font-bold text-green-700 dark:text-green-400":""}`,children:r.jsx(b,{content:s})})]},j)})})]},e))}),t?r.jsxs("div",{className:"mt-8 p-4 bg-light-surface dark:bg-dark-surface rounded-lg text-center border border-light-border dark:border-dark-border",children:[r.jsxs("h3",{className:"text-2xl font-bold font-display",children:["Your Score: ",m," / ",d.length]}),r.jsx("div",{className:"w-full bg-light-border dark:bg-dark-border rounded-full h-4 my-3 overflow-hidden",children:r.jsx("div",{className:"bg-light-primary h-4 rounded-full animate-progress-bar",style:{width:`${w}%`,transition:"width 1.5s ease-out"}})}),r.jsxs("button",{onClick:y,className:"mt-4 px-5 py-2 bg-light-primary text-white rounded-lg hover:bg-opacity-90 transition-colors flex items-center gap-2 mx-auto",children:[r.jsx(N,{className:"w-5 h-5"}),"Start New Session"]})]}):r.jsx("button",{onClick:k,className:"mt-6 w-full px-6 py-3 bg-light-primary text-white font-semibold rounded-md hover:bg-opacity-90 transition-colors disabled:bg-opacity-50",disabled:Object.keys(o).length!==d.length,children:"Submit & See Results"})]})};export{M as default};
