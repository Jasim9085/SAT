import{r as y,j as e,m as C,N as S,T as m,C as I,E as D}from"./index-Qv1PFdT_.js";const E=d=>{const n=new Date,r=new Date(d),s=Math.round((n.getTime()-r.getTime())/1e3),o=Math.round(s/60),l=Math.round(o/60),i=Math.round(l/24);return s<60?"Just now":o<60?`${o}m ago`:l<24?`${l}h ago`:i<7?`${i}d ago`:r.toLocaleDateString()},M=({isVisible:d,sessions:n,activeSessionId:r,onClose:s,onSwitchSession:o,onNewSession:l,onDeleteSession:i,onExportSession:p,onImportSession:g,onClearAllSessions:f})=>{const c=y.useRef(null),k=()=>{var t;(t=c.current)==null||t.click()},j=t=>{var h;const a=(h=t.target.files)==null?void 0:h[0];if(!a)return;const x=new FileReader;x.onload=v=>{var u;const b=(u=v.target)==null?void 0:u.result;typeof b=="string"&&g(b)},x.readAsText(a),t.target.value=""},N=(t,a)=>{t.stopPropagation(),window.confirm("Are you sure you want to permanently delete this session?")&&i(a)},w=(t,a)=>{t.stopPropagation(),p(a)};return d?e.jsxs("div",{className:"fixed inset-0 z-30",children:[e.jsx("div",{className:"sidebar-overlay absolute inset-0 bg-black/50",onClick:s,style:{animation:"fade-in 0.3s ease-out forwards"}}),e.jsxs("div",{className:"sidebar relative h-full w-72 max-w-[80vw] bg-light-surface dark:bg-dark-surface border-r border-light-border dark:border-dark-border flex flex-col animate-slide-in-left",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-light-border dark:border-dark-border flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold font-display",children:"Sessions"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:k,className:"p-2 rounded-md hover:bg-black/10 dark:hover:bg-white/10","aria-label":"Import Session",children:e.jsx(C,{className:"w-5 h-5"})}),e.jsx("input",{type:"file",ref:c,onChange:j,accept:".json,application/json",className:"hidden"}),e.jsx("button",{onClick:l,className:"p-2 rounded-md hover:bg-black/10 dark:hover:bg-white/10","aria-label":"New Session",children:e.jsx(S,{className:"w-5 h-5"})}),e.jsx("button",{onClick:f,className:"p-2 rounded-md hover:bg-red-500/10 text-red-500","aria-label":"Clear All Sessions",children:e.jsx(m,{className:"w-5 h-5"})}),e.jsx("button",{onClick:s,className:"p-2 rounded-md hover:bg-black/10 dark:hover:bg-white/10","aria-label":"Close sidebar",children:e.jsx(I,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-grow overflow-y-auto p-2 space-y-1",children:[n.map(t=>e.jsxs("div",{onClick:()=>o(t.id),className:`group p-3 rounded-lg cursor-pointer transition-colors relative ${r===t.id?"bg-light-primary/10 dark:bg-dark-primary/20":"hover:bg-light-bg dark:hover:bg-dark-bg"}`,children:[e.jsx("p",{className:"font-semibold text-sm truncate pr-16",children:t.topic||"New Session"}),e.jsx("p",{className:"text-xs text-light-text-secondary dark:text-dark-text-secondary mt-1",children:E(t.updatedAt)}),e.jsxs("div",{className:`absolute top-1/2 -translate-y-1/2 right-2 flex items-center transition-opacity ${r===t.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[e.jsx("button",{onClick:a=>w(a,t.id),className:"p-1.5 text-light-text-subtle dark:text-dark-text-subtle rounded-md hover:bg-blue-500/10 hover:text-blue-500 transition-all","aria-label":"Export session",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a=>N(a,t.id),className:"p-1.5 text-light-text-subtle dark:text-dark-text-subtle rounded-md hover:bg-red-500/10 hover:text-red-500 transition-all","aria-label":"Delete session",children:e.jsx(m,{className:"w-4 h-4"})})]})]},t.id)),n.length===0&&e.jsx("p",{className:"text-center text-sm text-light-text-secondary dark:text-dark-text-secondary p-4",children:"No sessions yet. Start a new one!"})]})]})]}):null};export{M as default};
